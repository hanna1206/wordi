{
  "id": "00000000-0000-0000-0000-000000000000",
  "prevId": "",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.user_settings": {
      "name": "user_settings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "native_language": {
          "name": "native_language",
          "type": "language_code",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        }
      },
      "indexes": {},
      "foreignKeys": {
        "user_settings_user_id_fkey": {
          "name": "user_settings_user_id_fkey",
          "tableFrom": "user_settings",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_settings_user_id_key": {
          "columns": ["user_id"],
          "nullsNotDistinct": false,
          "name": "user_settings_user_id_key"
        }
      },
      "checkConstraints": {
        "user_settings_email_check": {
          "name": "user_settings_email_check",
          "value": "email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'::text"
        }
      },
      "policies": {
        "user_settings_update_own": {
          "name": "user_settings_update_own",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["public"],
          "using": "(( SELECT auth.uid() AS uid) = user_id)"
        },
        "user_settings_select_own": {
          "name": "user_settings_select_own",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["public"]
        }
      },
      "isRLSEnabled": true
    },
    "public.user_word_progress": {
      "name": "user_word_progress",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "word_id": {
          "name": "word_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "easiness_factor": {
          "name": "easiness_factor",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'2.50'"
        },
        "interval_days": {
          "name": "interval_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 1
        },
        "repetition_count": {
          "name": "repetition_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "next_review_date": {
          "name": "next_review_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "last_reviewed_at": {
          "name": "last_reviewed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "total_reviews": {
          "name": "total_reviews",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "correct_reviews": {
          "name": "correct_reviews",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "consecutive_correct": {
          "name": "consecutive_correct",
          "type": "integer",
          "primaryKey": false,
          "notNull": false,
          "default": 0
        },
        "quality_scores": {
          "name": "quality_scores",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false,
          "default": "'[]'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'new'"
        },
        "is_archived": {
          "name": "is_archived",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_user_word_progress_next_review": {
          "name": "idx_user_word_progress_next_review",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            },
            {
              "expression": "next_review_date",
              "asc": true,
              "nulls": "last",
              "opclass": "timestamptz_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_word_progress_status": {
          "name": "idx_user_word_progress_status",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "status",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_user_word_progress_user_id": {
          "name": "idx_user_word_progress_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_word_progress_user_id_fkey": {
          "name": "user_word_progress_user_id_fkey",
          "tableFrom": "user_word_progress",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "user_word_progress_word_id_fkey": {
          "name": "user_word_progress_word_id_fkey",
          "tableFrom": "user_word_progress",
          "tableTo": "words",
          "schemaTo": "public",
          "columnsFrom": ["word_id"],
          "columnsTo": ["id"],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "user_word_progress_user_id_word_id_key": {
          "columns": ["user_id", "word_id"],
          "nullsNotDistinct": false,
          "name": "user_word_progress_user_id_word_id_key"
        }
      },
      "checkConstraints": {
        "user_word_progress_status_check": {
          "name": "user_word_progress_status_check",
          "value": "status = ANY (ARRAY['new'::text, 'learning'::text, 'review'::text, 'graduated'::text, 'lapsed'::text])"
        }
      },
      "policies": {
        "Users can delete their own word progress": {
          "name": "Users can delete their own word progress",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["public"],
          "using": "(auth.uid() = user_id)"
        },
        "Users can update their own word progress": {
          "name": "Users can update their own word progress",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["public"]
        },
        "Users can insert their own word progress": {
          "name": "Users can insert their own word progress",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["public"]
        },
        "Users can view their own word progress": {
          "name": "Users can view their own word progress",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["public"]
        }
      },
      "isRLSEnabled": true
    },
    "public.words": {
      "name": "words",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "uuid_generate_v4()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "normalized_word": {
          "name": "normalized_word",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "part_of_speech": {
          "name": "part_of_speech",
          "type": "part_of_speech_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true
        },
        "common_data": {
          "name": "common_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "part_specific_data": {
          "name": "part_specific_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "timezone('utc'::text, now())"
        },
        "target_language": {
          "name": "target_language",
          "type": "language_code",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": true,
          "default": "'english'"
        }
      },
      "indexes": {
        "idx_words_cache_lookup": {
          "name": "idx_words_cache_lookup",
          "columns": [
            {
              "expression": "normalized_word",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            },
            {
              "expression": "part_of_speech",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "target_language",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_words_common_data_gin": {
          "name": "idx_words_common_data_gin",
          "columns": [
            {
              "expression": "common_data",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_words_normalized_word": {
          "name": "idx_words_normalized_word",
          "columns": [
            {
              "expression": "normalized_word",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_words_part_of_speech": {
          "name": "idx_words_part_of_speech",
          "columns": [
            {
              "expression": "part_of_speech",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_words_part_specific_data_gin": {
          "name": "idx_words_part_specific_data_gin",
          "columns": [
            {
              "expression": "part_specific_data",
              "asc": true,
              "nulls": "last",
              "opclass": "jsonb_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_words_search": {
          "name": "idx_words_search",
          "columns": [
            {
              "expression": "to_tsvector('simple'::regconfig, normalized_word)",
              "asc": true,
              "nulls": "last",
              "opclass": "tsvector_ops",
              "isExpression": true
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "gin",
          "with": {}
        },
        "idx_words_target_language": {
          "name": "idx_words_target_language",
          "columns": [
            {
              "expression": "target_language",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_words_user_id": {
          "name": "idx_words_user_id",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_words_user_normalized_target_unique": {
          "name": "idx_words_user_normalized_target_unique",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "text_ops",
              "isExpression": false
            },
            {
              "expression": "normalized_word",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "target_language",
              "asc": true,
              "nulls": "last",
              "opclass": "enum_ops",
              "isExpression": false
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_words_user_word_lookup": {
          "name": "idx_words_user_word_lookup",
          "columns": [
            {
              "expression": "user_id",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            },
            {
              "expression": "normalized_word",
              "asc": true,
              "nulls": "last",
              "opclass": "uuid_ops",
              "isExpression": false
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "words_user_id_fkey": {
          "name": "words_user_id_fkey",
          "tableFrom": "words",
          "tableTo": "users",
          "schemaTo": "auth",
          "columnsFrom": ["user_id"],
          "columnsTo": ["id"],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "checkConstraints": {
        "words_normalized_word_check": {
          "name": "words_normalized_word_check",
          "value": "length(normalized_word) > 0"
        }
      },
      "policies": {
        "words_delete_own": {
          "name": "words_delete_own",
          "as": "PERMISSIVE",
          "for": "DELETE",
          "to": ["public"],
          "using": "(( SELECT auth.uid() AS uid) = user_id)"
        },
        "words_update_own": {
          "name": "words_update_own",
          "as": "PERMISSIVE",
          "for": "UPDATE",
          "to": ["public"]
        },
        "words_insert_own": {
          "name": "words_insert_own",
          "as": "PERMISSIVE",
          "for": "INSERT",
          "to": ["public"]
        },
        "words_select_own_or_cache": {
          "name": "words_select_own_or_cache",
          "as": "PERMISSIVE",
          "for": "SELECT",
          "to": ["public"]
        }
      },
      "isRLSEnabled": true
    }
  },
  "enums": {
    "public.language_code": {
      "name": "language_code",
      "values": ["russian", "english", "ukrainian", "turkish", "portuguese"],
      "schema": "public"
    },
    "public.part_of_speech_enum": {
      "name": "part_of_speech_enum",
      "values": [
        "noun",
        "verb",
        "adjective",
        "personal pronoun",
        "demonstrative pronoun",
        "other"
      ],
      "schema": "public"
    }
  },
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.word_cache": {
      "name": "word_cache",
      "schema": "public",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "normalized_word": {
          "name": "normalized_word",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "part_of_speech": {
          "name": "part_of_speech",
          "type": "part_of_speech_enum",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "target_language": {
          "name": "target_language",
          "type": "language_code",
          "typeSchema": "public",
          "primaryKey": false,
          "notNull": false
        },
        "common_data": {
          "name": "common_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "part_specific_data": {
          "name": "part_specific_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "isExisting": false,
      "definition": "SELECT DISTINCT ON (words.normalized_word, words.part_of_speech, words.target_language) words.id, words.normalized_word, words.part_of_speech, words.target_language, words.common_data, words.part_specific_data, words.created_at FROM words ORDER BY words.normalized_word, words.part_of_speech, words.target_language, words.created_at",
      "materialized": false
    }
  },
  "_meta": {
    "schemas": {},
    "tables": {},
    "columns": {}
  },
  "internal": {
    "tables": {}
  }
}
